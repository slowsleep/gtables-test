# Laravel Google Sheet Integration App

Приложение на Laravel, синхронизирующее данные между локальной базой и Google Таблицей с поддержкой обратной связи через интерфейс и CLI.

## Основной функционал

- Создана Eloquent-модель с интерфейсом управления (создание, редактирование, удаление, просмотр).
- В модели предусмотрено поле `status` с ограниченным набором значений (`Allowed`, `Prohibited`), реализованное через ENUM.
- Интерфейс содержит кнопку для генерации 1000 случайных строк с равномерным распределением статусов.
- Есть возможность одним кликом очистить все записи из таблицы.

## Интеграция с Google Sheets

- Через UI можно указать ссылку на Google Таблицу, доступную для редактирования всем.
- Раз в минуту система синхронизирует данные с таблицей:
  - Отправляются только записи со статусом `Allowed`.
  - Изменение статуса на `Prohibited` удаляет строку из таблицы, а обратное действие — добавляет.
  - Удаление записи из БД удаляет её и из Google Sheet.
- Комментарии пользователей, написанные в последнем столбце Google Таблицы, сохраняются и не перезаписываются при обновлении данных. Привязка комментариев к строкам реализована по ID модели.


## Консольная команда

Реализована команда `php artisan google-sheet:get`, выполняющая:

1. Получение данных из привязанной Google Таблицы.
2. Построчный вывод в консоль:
   - ID модели.
   - Комментарий из Google Sheet.
3. Индикация прогресса выполнения через ProgressBar.
4. Поддержка аргумента `count`, ограничивающего количество обрабатываемых строк.

Пример:
```bash
php artisan google-sheet:get 30
```

## Браузерный маршрут /fetch

Запуск вывода ид и комментария записей из Google Таблицы доступен и из браузера по маршруту:

`/fetch`

Поддерживается параметр ограничения:

`/fetch/20` — вернёт только первые 20 строк.


## Запуск проекта

Установить зависимости:

```composer install```

Поместите JSON-ключ сервисного аккаунта Google в `/storage/app/credentials.json`

Запустить приложение

`sail up -d`

Запустить планировщик задач:

`sail php artisan schedule:work`


## Стек

- Laravel (v8)

- Google Sheets API (через сервисный аккаунт)

- Tailwind CSS / Blade

- JavaScript (Vanilla)
